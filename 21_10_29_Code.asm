;DOT MATRIX COLOR CHANGE
COLGREEN	EQU	0FFC5H
COLRED		EQU	0FFC6H
ROW		EQU	0FFC7H

	ORG	8000H

	MOV 	R1,#00H
	MOV	R2,#00H
	MOV	R0,#00H

	CALL 	DOTCOLG
	CALL	DOTCOLR
	CALL 	DELAY

INIT:	MOV	R2,#00000000B
	MOV	R0,#00000000B
	CALL	DOTCOLR

	MOV	R1,#00000001B
	MOV	R0,#00000011B
	CLR	C

DROW1:	MOV	R2,#00000000B
	CALL	DOTCOLR
	MOV	A,R0
	RLC	A
	MOV	R0, A

DRO1:	CALL	DOTCOLG
	CALL	DELAY

	MOV	A,R0
	RLC	A
	MOV	R0,A	

	JC	DCOL1
	JMP	DRO1

DCOL1:	MOV	R2,#00000000B
	CALL	DOTCOLR
	MOV	A,R1
	RLC	A
	MOV	R1, A

DCO1:	CALL	DOTCOLG
	CALL	DELAY

	MOV	A,R1
	RLC	A
	MOV	R1,A	

	JC	DROW2
	JMP	DCO1

DROW2:	MOV	R2,#00000000B
	CALL	DOTCOLR
	MOV	A,R0
	RRC	A
	MOV	R0, A

DRO2:	CALL	DOTCOLG
	CALL	DELAY

	MOV	A,R0
	RRC	A
	MOV	R0,A
	
	JC	DCOL2
	JMP	DRO2

DCOL2:	MOV	R2,#00000000B
	CALL	DOTCOLR
	MOV	A,R1
	RRC	A
	MOV	R1, A

DCO2:	CALL	DOTCOLG
	CALL	DELAY

	MOV	A,R1
	RRC	A
	MOV	R1,A
	
	JC	DROW1
	JMP	DCO2

DOTCOLG:
	MOV	DPTR,#COLGREEN
	MOV	A,R1
	MOVX	@DPTR,A

	MOV	DPTR,#ROW
	MOV	A,R0
	MOVX	@DPTR,A
	RET

DOTCOLR:
	MOV	DPTR,#COLRED
	MOV	A,R2
	MOVX	@DPTR,A

	MOV	DPTR,#ROW
	MOV	A,R0
	MOVX	@DPTR,A
	RET

DELAY:	MOV	R7,#04H
DELAY1:	MOV	R6,#0FFH
DELAY2:	MOV	R5,#0FFH
DELAY3:	DJNZ	R5,DELAY3
	DJNZ	R6,DELAY2
	DJNZ	R7,DELAY1
RET
END